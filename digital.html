<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>TikTok-Simulator Modern</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html, body {
  margin:0; padding:0;
  width:100%; height:100%;
  font-family:'Montserrat', Arial, sans-serif;
  background:#000;
  overflow:hidden;
}
.app {
  display:flex; width:100vw; height:100vh;
  flex-direction:row;
}
.image-area {
  flex:1; display:flex;
  justify-content:center; align-items:center;
  position:relative; min-width:0; height:100%;
}
.post-frame {
  width:360px; height:480px;
  border-radius:20px; overflow:hidden;
  background:#0f0f0f;
  border:2px solid rgba(255,255,255,0.18);
  box-shadow:0 12px 40px rgba(0,0,0,0.55);
  display:flex; align-items:center; justify-content:center;
  position:relative;
}
.post-frame img,
.post-frame iframe {
  width:100%; height:100%;
  object-fit:cover;
  border:0; opacity:1;
}
.post-frame iframe { pointer-events:none; }

.icons {
  position:absolute; right:10px; top:50%;
  transform:translateY(-50%);
  display:flex; flex-direction:column; gap:15px; z-index:10;
}
.icon-btn {
  background:rgba(255,255,255,0.7); border:none;
  color:black; border-radius:50%; width:60px; height:60px;
  display:flex; justify-content:center; align-items:center;
  cursor:pointer; transition:0.3s;
}
.icon-btn:hover { background:white; color:red; }
.icon-btn:disabled { opacity:0.6; cursor:not-allowed; }

.ai-section {
  width:320px; max-width:36vw;
  background:#222; padding:20px; color:white;
  display:flex; flex-direction:column;
  box-sizing:border-box; min-width:260px;
  overflow:hidden;
}
.ai-header { text-align:center; font-size:1.6em; margin-bottom:10px; flex-shrink:0; }
#log {
  display:flex; flex-direction:column;
  gap:6px; font-size:0.9em; overflow-y:auto;
  flex:1; min-height:180px;
}

/* Quiz */
#quizOverlay { position:fixed; inset:0; background:rgba(0,0,0,0.75); display:none; justify-content:center; align-items:center; z-index:9999; padding:18px; box-sizing:border-box; }
#quizContent { width:min(920px,100%); max-height:calc(100vh-36px); display:flex; flex-direction:column; gap:12px; overflow:auto; padding:0; }
#quizBox { background:#222; padding:22px; border-radius:20px; color:white; text-align:center; box-sizing:border-box; }
#quizResults { color:white; text-align:left; background:#333; padding:18px; border-radius:12px; box-sizing:border-box; }
.option-btn { padding:15px; border:none; border-radius:10px; background:#9b59b6; color:white; cursor:pointer; font-size:1.05em; width:100%; transition:0.3s; }
.option-btn:disabled { opacity:0.75; cursor:not-allowed; }
#replayBtn { margin-top:14px; cursor:pointer; font-weight:bold; color:#9b59b6; text-align:center; }
#replayBtn:hover { color:#fff; }

/* MOBILE */

  @media(max-width:860px){
  .app { flex-direction:column; }
  .image-area { flex:7; justify-content:center; }
  .ai-section { flex:3; width:100%; max-width:100%; min-width:0; padding:12px; flex-direction:column; }
  
  /* l√©ger margin autour du post-frame */
  .post-frame { 
    width:90%; max-width:420px; height:480px; 
    margin: 8px; /* <-- l√©ger margin */
  }

  #log { font-size:0.85em; min-height:150px; }
}

}
</style>
</head>
<body>
<div class="app">
  <div class="image-area">
    <div id="postFrame" class="post-frame"><div id="postMedia"></div></div>
    <div class="icons">
      <button class="icon-btn" data-action="like"><span class="material-icons">favorite</span></button>
      <button class="icon-btn" data-action="comment"><span class="material-icons">comment</span></button>
      <button class="icon-btn" data-action="skip"><span class="material-icons">cancel</span></button>
      <button class="icon-btn" data-action="share"><span class="material-icons">share</span></button>
    </div>
  </div>
  <div class="ai-section">
    <div class="ai-header">ü§ñ Was die KI sieht</div>
    <div id="log"></div>
  </div>
</div>

<div id="quizOverlay">
  <div id="quizContent">
    <div id="quizBox"></div>
    <div id="quizResults"></div>
  </div>
</div>

<script>
(function(){
const categories=["Humor","Musik","Tiere","Sport","Gaming","Kochen","Movie"];
const content=[
  {cat:"Humor",type:"iframe",src:"https://giphy.com/embed/8rN9VXNb7dfU792YQt"},
  {cat:"Humor",type:"iframe",src:"https://giphy.com/embed/JIX9t2j0ZTN9S"},
  {cat:"Humor",type:"iframe",src:"https://giphy.com/embed/l1rrKjeprm2VsbCc1w"},
  {cat:"Musik",type:"iframe",src:"https://giphy.com/embed/Ii4CrLzLooAjryNiNk"},
  {cat:"Musik",type:"iframe",src:"https://giphy.com/embed/TKutFlo2v9KN7zwUbY"},
  {cat:"Musik",type:"iframe",src:"https://giphy.com/embed/kxfQnpf3UGAaAUajXn"},
  {cat:"Sport",type:"iframe",src:"https://giphy.com/embed/8PEe5JNCsV6HPqeLpC"},
  {cat:"Sport",type:"iframe",src:"https://giphy.com/embed/316JKVkNXyl1YqBTWj"},
  {cat:"Sport",type:"img",src:"gym.jpg"},
  {cat:"Tiere",type:"iframe",src:"https://giphy.com/embed/Vi0Ws3t4JSLOgdkaBq"},
  {cat:"Tiere",type:"img",src:"cat.jpg"},
  {cat:"Tiere",type:"img",src:"dog.jpg"},
  {cat:"Gaming",type:"iframe",src:"https://giphy.com/embed/V5l5ZucxUc7kNTaXWK"},
  {cat:"Gaming",type:"iframe",src:"https://giphy.com/embed/ysiCYZUJkW3XRb7k9K"},
  {cat:"Gaming",type:"iframe",src:"https://giphy.com/embed/8UiYQWoZgafFJaN9hw"},
  {cat:"Kochen",type:"img",src:"cake.jpg"},
  {cat:"Kochen",type:"img",src:"cookies.jpg"},
  {cat:"Movie",type:"img",src:"movie.jpg"},
  {cat:"Movie",type:"img",src:"netflix.jpg"},
  {cat:"Movie",type:"img",src:"strangerthing.jpg"}
];

let currentIndex=0,weights={},clicks=0,currentPost,quizDisplayed=false;
let postShownAt=0,perPostTimings=[],shuffledContent=[],finished=false;

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
function init(){ categories.forEach(c=>weights[c]=1); clicks=0; quizDisplayed=false; finished=false;
perPostTimings=[]; postShownAt=0; shuffledContent=shuffle([...content]); currentIndex=0;
document.getElementById('log').innerHTML=''; document.getElementById('quizBox').innerHTML=''; document.getElementById('quizResults').innerHTML='';
document.getElementById('quizOverlay').style.display='none'; showPost(currentIndex); toggleInteraction(true); }

function markPostShownNow(){postShownAt=performance.now();}
function showPost(idx){ currentPost=shuffledContent[idx];
const mediaHost=document.getElementById('postMedia'); mediaHost.innerHTML=''; let el;
if(currentPost.type==="img"){ el=document.createElement('img'); el.src=currentPost.src; el.alt=currentPost.cat||"Post"; el.onload=()=>markPostShownNow(); el.onerror=()=>markPostShownNow();
mediaHost.appendChild(el); requestAnimationFrame(()=>{ el.style.opacity=1; }); setTimeout(()=>{ if(!postShownAt) markPostShownNow(); },0); return;}
if(currentPost.type==="iframe"){ el=document.createElement('iframe'); el.src=currentPost.src; el.allowFullscreen=true; el.onload=()=>markPostShownNow();
mediaHost.appendChild(el); requestAnimationFrame(()=>{ el.style.opacity=1; }); setTimeout(()=>{ if(!postShownAt) markPostShownNow(); },150); return;} }

function appendLog(html){
  const log=document.getElementById('log');
  if(window.innerWidth<=860){ log.innerHTML=html; } // mobile: efface ancien log
  else{ log.insertAdjacentHTML('beforeend',html); log.scrollTop=log.scrollHeight; } // desktop: scroll vers bas
}

function maybeEndOrNext(){ if(currentIndex>=shuffledContent.length-1){ finished=true; if(!quizDisplayed){quizDisplayed=true;showQuiz();} return;}
currentIndex++; postShownAt=0; showPost(currentIndex); if(clicks>=20 && !quizDisplayed){quizDisplayed=true;showQuiz(); } }

document.querySelector('.icons').addEventListener('click', e=>{
  const btn=e.target.closest('.icon-btn'); if(!btn) return;
  const action=btn.dataset.action;
  const now=performance.now(); const timeSpentMs=postShownAt?(now-postShownAt):0; const timeSpentSec=(timeSpentMs/1000).toFixed(2);
  const interpretations={like:"Der Nutzer interessiert sich f√ºr dieses Thema.",comment:"Der Nutzer interagiert mit dem Post ‚Äì starkes Interesse.",share:"Der Nutzer h√§lt den Post f√ºr teilenswert.",skip:"Der Nutzer zeigt wenig Interesse an diesem Thema."};
  const icons={like:"‚ù§Ô∏è",comment:"üí¨",share:"üîó",skip:"‚è≠Ô∏è"};
  const boost={like:1,comment:2,share:3,skip:0}[action];
  if(weights[currentPost.cat]!==undefined) weights[currentPost.cat]+=boost;
  perPostTimings.push({index:currentIndex,cat:currentPost.cat,action,timeSpentMs,src:currentPost.src,type:currentPost.type});
  appendLog(`<div>${icons[action]} Kategorie <strong>${currentPost.cat}</strong> wurde ${action==="like"?"geliked":action==="comment"?"kommentiert":action==="share"?"geteilt":"√ºbersprungen"}<br><em>‚è±Ô∏è Zeit bis Klick: ${timeSpentSec}s</em><br>‚Üí ${interpretations[action]}</div><br>`);
  clicks++; maybeEndOrNext();
});

function toggleInteraction(enable){ document.querySelectorAll('.icon-btn').forEach(b=>b.disabled=!enable); }

init();
})();
</script>
</body>
</html>
